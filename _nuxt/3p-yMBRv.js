import{_ as G}from"./BdmTt6On.js";import{_ as H}from"./CQx_EpTa.js";import{f as J,r as g,g as N,h as K,i as M,o as i,c as B,b as a,w as e,d as n,j as c,k as u,a as V,l as Q,n as W,m as d,F as X,q as Z,s as ee,v as ae,x as te,t as p,y as ne,z as se,A as oe,B as le}from"./BKJPD1Af.js";import{_ as ie}from"./Dg9ZPHzZ.js";import{_ as ce,a as _e}from"./-oypOTQd.js";import{_ as ue,a as re,b as de,c as pe}from"./B5Izdgzc.js";import{_ as fe}from"./DY3PppPs.js";import{_ as me}from"./Ckhsli7N.js";import"./CbSbQc9u.js";const ve={class:"flex gap-2"},ge={class:"flex flex-col gap-1.5 whitespace-nowrap"},Ce=J({__name:"index",async setup(ke){let r,k;const f=g(!1),w=g([]),S=([r,k]=N(()=>ee()),r=await r,k(),r),_=g(""),I=S.map(s=>({label:s.label,value:s.identifier}));K(_,()=>m()),[r,k]=N(()=>m()),await r,k();async function m({silent:s}={}){if(!f.value){s||(f.value=!0);try{w.value=await ae({scope:_.value}),w.value.some(b=>!b.is_finished)&&setTimeout(()=>m({silent:!0}),5e3)}catch{w.value=[]}finally{f.value=!1}}}const{notifySuccess:x,notifyError:L}=ne(),y=g(null);async function j(s){if(!(y.value||!confirm("Are you sure you want to delete this IPA package?"))){y.value=s;try{await se({id:s}),await m(),x("IPA package was deleted")}finally{y.value=null}}}const h=g(null);async function z(s,v){if(!h.value){h.value=s;try{await oe({ipa_id:s,to_app_identifier:v}),await m(),x("IPA package was assigned to app")}finally{h.value=null}}}const P=M(()=>{if(_.value)return`/apps/binary-packages/upload/${_.value}`});function E(){P.value||L("Please specify scope to upload IPA package",{id:"upload_ipa"})}return(s,v)=>{const b=G,O=H,R=te,A=ie,T=ce,U=_e,o=ue,$=re,l=pe,D=fe,F=me,C=le,Y=de;return i(),B("div",null,[a(b,null,{default:e(()=>[n("IPA packages")]),_:1}),c(I).length?(i(),u(U,{key:0,label:"Scope",class:W(["mb-5",{"pointer-events-none":c(f)}])},{default:e(()=>[V("div",ve,[a(O,{modelValue:c(_),"onUpdate:modelValue":v[0]||(v[0]=t=>Q(_)?_.value=t:null),placeholder:"Choose identifier",class:"basis-60",options:c(I),"show-clear":""},null,8,["modelValue","options"]),(i(),u(T,{key:c(_),content:"Upload IPA package"},{default:e(()=>[a(A,{variant:"primary",class:"h-full",to:c(P),onClick:E},{default:e(()=>[a(R,{name:"tabler:cloud-upload",class:"text-xl leading-none"})]),_:1},8,["to"])]),_:1}))])]),_:1},8,["class"])):d("",!0),a(Y,{loading:c(f)},{head:e(()=>[a($,null,{default:e(()=>[a(o,null,{default:e(()=>[n("App identifier")]),_:1}),a(o,{class:"whitespace-nowrap"},{default:e(()=>[n("App label")]),_:1}),a(o,null,{default:e(()=>[n("Name")]),_:1}),a(o,null,{default:e(()=>[n("Version")]),_:1}),a(o,null,{default:e(()=>[n("Icon")]),_:1}),a(o,null,{default:e(()=>[n("Status")]),_:1}),a(o,{class:"whitespace-nowrap"},{default:e(()=>[n("Last status validation issue")]),_:1}),a(o,{class:"whitespace-nowrap"},{default:e(()=>[n("Is assigned")]),_:1}),a(o,{class:"whitespace-nowrap"},{default:e(()=>[n("Is in store")]),_:1}),a(o)]),_:1})]),empty:e(()=>[n(" No IPA packages were found ")]),body:e(()=>[(i(!0),B(X,null,Z(c(w),t=>(i(),u($,{key:t.id},{default:e(()=>[a(l,{class:"break-words"},{default:e(()=>[n(p(t.app_identifier),1)]),_:2},1024),a(l,null,{default:e(()=>[n(p(t.app_label),1)]),_:2},1024),a(l,null,{default:e(()=>[n(p(t.name),1)]),_:2},1024),a(l,null,{default:e(()=>[n(p(t.bundle_version),1)]),_:2},1024),a(l,null,{default:e(()=>[t.icon_uri?(i(),u(D,{key:0,src:t.icon_uri,class:"h-9 w-9 rounded-md object-cover object-center"},null,8,["src"])):d("",!0)]),_:2},1024),a(l,{class:"break-words"},{default:e(()=>[t.is_finished?d("",!0):(i(),u(F,{key:0,size:"1.2em",class:"relative top-1 mr-1.5 inline-block"})),a(C,{tag:"span",content:t.status_translated},null,8,["content"])]),_:2},1024),a(l,{class:"whitespace-pre-line break-words"},{default:e(()=>[a(C,{content:t.last_status_validation_issue},null,8,["content"])]),_:2},1024),a(l,null,{default:e(()=>[n(p(t.is_assigned?"Yes":"No"),1)]),_:2},1024),a(l,null,{default:e(()=>[n(p(t.is_in_store?"Yes":"No"),1)]),_:2},1024),a(l,null,{default:e(()=>[V("div",ge,[t.is_assigned?d("",!0):(i(),u(A,{key:0,variant:"primary",loading:c(h)===t.id,onClick:q=>z(t.id,t.app_identifier)},{default:e(()=>[n(" Assign to app ")]),_:2},1032,["loading","onClick"])),t.is_assigned?d("",!0):(i(),u(A,{key:1,to:`/apps/binary-packages/manage/${t.id}`},{default:e(()=>[n(" Edit metadata ")]),_:2},1032,["to"])),t.installations?d("",!0):(i(),u(A,{key:2,variant:"danger",loading:c(y)===t.id,onClick:q=>j(t.id)},{default:e(()=>[n(" Delete ")]),_:2},1032,["loading","onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])])}}});export{Ce as default};
//# sourceMappingURL=3p-yMBRv.js.map
