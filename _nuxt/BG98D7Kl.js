import{_ as D}from"./Dg9ZPHzZ.js";import{_ as P,a as E,b as R}from"./BmpEmYk5.js";import{_ as I}from"./CbSbQc9u.js";import{f as x,C as B,i as T,o as c,c as g,b as e,w as t,L as w,n as U,j as l,a as v,t as C,_ as F,r as k,H as M,G as A,am as L,k as $,d as n,l as q,aB as z,y as j,al as G,F as V,q as H,m as S,aw as O,aC as W,a5 as J}from"./BKJPD1Af.js";import{_ as K}from"./E0975lw9.js";import{a as Q}from"./-oypOTQd.js";import{u as X}from"./oH3RGyCo.js";import{_ as Y}from"./0_PWAuSp.js";import"./Ckhsli7N.js";const Z={class:"px-4"},ee=x({__name:"v-menu-item",props:{to:{},disabled:{type:Boolean}},setup(m){const s=m,i=B(),r=T(()=>s.to==="/"?i.path===s.to:i.path.startsWith(s.to));function u(o){s.disabled&&(o.stopPropagation(),o.preventDefault())}return(o,p)=>{const a=I;return c(),g("div",Z,[e(a,{to:s.to,class:U(["block rounded-md px-3 py-1 text-gray-700 transition-all dark:text-gray-400",{"!cursor-not-allowed opacity-30":s.disabled,"hover:bg-gray-200 hover:dark:bg-gray-800":!s.disabled,"!bg-gray-300 dark:!bg-gray-700":l(r)}]),onClickCapture:u},{default:t(()=>[w(o.$slots,"default")]),_:3},8,["to","class"])])}}}),te={class:"mb-1.5 px-5 text-lg font-medium"},ae={class:"flex flex-col items-stretch gap-1"},oe=x({__name:"v-menu-group",props:{title:{}},setup(m){const s=m;return(i,r)=>(c(),g("div",null,[v("div",te,C(s.title),1),v("div",ae,[w(i.$slots,"default")])]))}}),ne={},se={class:"sticky top-3 flex h-fit flex-col items-stretch gap-3 rounded-md bg-gray-100 py-4 transition dark:bg-slate-900"};function ie(m,s){return c(),g("nav",se,[w(m.$slots,"default")])}const le=F(ne,[["render",ie]]),re=["src"],ce={class:"grid grid-cols-3 gap-5"},_e=x({__name:"v-modal-sign-agreement",props:{agreement:{}},setup(m,{expose:s}){const i=m,r=k(),u=k(!1);s({show:()=>{var d;return(d=r.value)==null?void 0:d.show()},hide:()=>{var d;return(d=r.value)==null?void 0:d.hide()}});const o=M({id:i.agreement.id,signatory_name:"","2fa_code":""});A(()=>{o.id=i.agreement.id}),A(()=>{u.value||(o.signatory_name="",o["2fa_code"]="")});const p=L(),a=k(!1);async function _(){if(!a.value){a.value=!0;try{await z(o),await p.load(),u.value=!1,o.signatory_name="",o["2fa_code"]="";const{notifySuccess:d}=j();d("Agreement was signed"),X().emit("agreementSigned",i.agreement)}finally{a.value=!1}}}return(d,f)=>{const y=K,b=Q,N=D;return c(),$(l(Y),{ref_key:"modal",ref:r,modelValue:l(u),"onUpdate:modelValue":f[2]||(f[2]=h=>q(u)?u.value=h:null),size:"w-[85rem]"},{header:t(()=>[n(C(i.agreement.name),1)]),footer:t(()=>[e(N,{variant:"primary",loading:l(a),onClick:_},{default:t(()=>[n(" Sign ")]),_:1},8,["loading"])]),default:t(()=>[v("iframe",{src:i.agreement.uri,class:"mb-5 aspect-[9/16] w-full"},null,8,re),v("form",ce,[e(b,{label:"Name"},{default:t(()=>[e(y,{modelValue:l(o).signatory_name,"onUpdate:modelValue":f[0]||(f[0]=h=>l(o).signatory_name=h)},null,8,["modelValue"])]),_:1}),e(b,{label:"6 digit code from your authenticator app"},{default:t(()=>[e(y,{modelValue:l(o)["2fa_code"],"onUpdate:modelValue":f[1]||(f[1]=h=>l(o)["2fa_code"]=h)},null,8,["modelValue"])]),_:1}),e(b,{label:"Date"},{default:t(()=>[e(y,{"model-value":new Date().toLocaleDateString(),disabled:""},null,8,["model-value"])]),_:1})])]),_:1},8,["modelValue"])}}}),de={key:0,class:"mb-5 flex flex-col gap-2"},ue=x({__name:"v-static-notifications",setup(m){const{unsignedAgreements:s}=G(L()),i=k(),r=k(null);async function u(o){var p;r.value=o,await O(),(p=i.value)==null||p.show()}return(o,p)=>{const a=W;return l(s).length?(c(),g("div",de,[(c(!0),g(V,null,H(l(s),_=>(c(),$(a,{key:_.id,type:"warning",class:"cursor-pointer",onClick:d=>u(_)},{default:t(()=>[n(" Required agreement "),v("b",null,"«"+C(_.name)+"»",1),n(" isn't signed. ")]),_:2},1032,["onClick"]))),128)),l(r)?(c(),$(l(_e),{key:0,ref_key:"agreementModal",ref:i,agreement:l(r)},null,8,["agreement"])):S("",!0)])):S("",!0)}}}),me={class:"flex h-full flex-col"},fe={class:"flex-grow"},we=x({__name:"default",setup(m){const s=B(),i=J();return(r,u)=>{const o=D,p=P,a=ee,_=oe,d=le,f=ue,y=E,b=R;return c(),g("div",me,[e(p,null,{default:t(()=>[l(s).name!=="auth"?(c(),g(V,{key:0},[l(i).data?(c(),g(V,{key:0},[v("span",null,C(l(i).data.email),1),e(o,{variant:"primary",onClick:l(i).logout},{default:t(()=>[n(" Logout ")]),_:1},8,["onClick"])],64)):(c(),$(o,{key:1,variant:"primary",to:"/auth"},{default:t(()=>[n(" Login ")]),_:1}))],64)):S("",!0)]),_:1}),e(y,{class:"flex flex-grow gap-8"},{default:t(()=>[e(d,{class:"shrink-0 basis-[18rem]"},{default:t(()=>[e(_,{title:"Apps"},{default:t(()=>[e(a,{to:"/apps/identifiers"},{default:t(()=>[n("Identifiers")]),_:1}),e(a,{to:"/apps/binary-packages"},{default:t(()=>[n("IPA packages")]),_:1})]),_:1}),e(_,{title:"Financial"},{default:t(()=>[e(a,{to:"/finances/invoices",disabled:""},{default:t(()=>[n(" Invoices ")]),_:1}),e(a,{to:"/finances/payouts",disabled:""},{default:t(()=>[n(" Payouts ")]),_:1}),e(a,{to:"/finances/revenue",disabled:""},{default:t(()=>[n(" Revenue ")]),_:1}),e(a,{to:"/finances/products",disabled:""},{default:t(()=>[n(" Products ")]),_:1})]),_:1}),e(_,{title:"Legal"},{default:t(()=>[e(a,{to:"/legal/overview"},{default:t(()=>[n("Overview")]),_:1}),e(a,{to:"/legal/features"},{default:t(()=>[n("Platform features")]),_:1}),e(a,{to:"/legal/copyright-infringements"},{default:t(()=>[n("Copyright infringements")]),_:1}),e(a,{to:"https://publisherid.appdb.to"},{default:t(()=>[n("Publisher ID")]),_:1})]),_:1}),e(_,{title:"Developer area"},{default:t(()=>[e(a,{to:"/developer/tokens"},{default:t(()=>[n("Service keys & tokens")]),_:1}),e(a,{to:"/developer/test-devices"},{default:t(()=>[n("Test devices")]),_:1}),e(a,{to:"https://rtfm.dbservices.to/"},{default:t(()=>[n("Documentation")]),_:1})]),_:1}),e(_,{title:"Settings"},{default:t(()=>[e(a,{to:"/settings/notifications",disabled:""},{default:t(()=>[n(" Email notifications ")]),_:1}),e(a,{to:"/developer/events-notifications",disabled:""},{default:t(()=>[n(" Events notifications ")]),_:1})]),_:1})]),_:1}),v("main",fe,[e(f),w(r.$slots,"default")])]),_:3}),e(b)])}}});export{we as default};
//# sourceMappingURL=BG98D7Kl.js.map
