{"version":3,"file":"CA9BLjB7.js","sources":["../../../../pages/developer/test-devices/manage/[id].vue"],"sourcesContent":["<template>\n  <div>\n    <v-h1 :default-back-to=\"backPath\">{{ title }}</v-h1>\n\n    <form\n      class=\"flex flex-col items-stretch gap-5\"\n      @submit.prevent=\"submit\"\n    >\n      <v-label label=\"UDID\">\n        <v-input\n          v-model=\"form.udid\"\n          :disabled=\"Boolean(id)\"\n          class=\"w-80\"\n        />\n      </v-label>\n\n      <v-label label=\"Failure domain\">\n        <v-dropdown\n          v-model=\"form.failure_domain_identifier\"\n          class=\"min-w-80\"\n          placeholder=\"Choose failure domain\"\n          :options=\"failureDomainOptions\"\n        />\n      </v-label>\n\n      <v-button\n        variant=\"primary\"\n        class=\"self-start\"\n        :loading=\"isSubmitting\"\n      >\n        Save\n      </v-button>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Payload } from \"core/types/api\"\n\nconst { title, backPath, id } = useManagePage(\"test device\")\n\nconst device = id.value ? (await getTestDevices({ udid: id.value }))[0] : null\n\nconst form = reactive<Payload<typeof editTestDevice>>({\n  udid: id.value || \"\",\n  failure_domain_identifier: \"\",\n})\n\nfunction fillForm() {\n  if (!device) {\n    return\n  }\n\n  for (const key in form) {\n    if (!(key in device)) {\n      continue\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    form[key as keyof typeof form] = device[key as keyof typeof device] as never\n  }\n}\n\nfillForm()\n\nconst failureDomains = await getFailureDomains()\nconst failureDomainOptions = failureDomains.map((domain) => ({ label: domain.description, value: domain.identifier }))\n\nconst isSubmitting = ref(false)\nasync function submit() {\n  isSubmitting.value = true\n\n  try {\n    await editTestDevice(form)\n\n    navigateTo(\"/developer/test-devices\")\n    const { notifySuccess } = useNotification()\n    notifySuccess(\"Test device was saved\")\n  } finally {\n    isSubmitting.value = false\n  }\n}\n</script>\n"],"names":["title","backPath","id","useManagePage","device","__temp","__restore","_withAsyncContext","getTestDevices","form","reactive","fillForm","key","failureDomainOptions","getFailureDomains","domain","isSubmitting","ref","submit","editTestDevice","navigateTo","notifySuccess","useNotification"],"mappings":"wdAuCA,KAAM,CAAE,MAAAA,EAAO,SAAAC,EAAU,GAAAC,CAAG,EAAIC,EAAc,aAAa,EAErDC,EAASF,EAAG,OAAS,CAAAG,EAAAC,CAAA,EAAAC,EAAA,IAAMC,EAAe,CAAE,KAAMN,EAAG,KAAO,CAAA,CAAA,mBAAG,CAAC,EAAI,KAEpEO,EAAOC,EAAyC,CACpD,KAAMR,EAAG,OAAS,GAClB,0BAA2B,EAAA,CAC5B,EAED,SAASS,GAAW,CAClB,GAAKP,EAIL,UAAWQ,KAAOH,EACVG,KAAOR,IAKRK,EAAAG,CAAwB,EAAIR,EAAOQ,CAA0B,EAEtE,CAESD,IAGT,MAAME,GADiB,CAAAR,EAAAC,CAAA,EAAAC,EAAA,IAAMO,GAAkB,mBACH,IAAKC,IAAY,CAAE,MAAOA,EAAO,YAAa,MAAOA,EAAO,UAAA,EAAa,EAE/GC,EAAeC,EAAI,EAAK,EAC9B,eAAeC,GAAS,CACtBF,EAAa,MAAQ,GAEjB,GAAA,CACF,MAAMG,EAAeV,CAAI,EAEzBW,EAAW,yBAAyB,EAC9B,KAAA,CAAE,cAAAC,GAAkBC,IAC1BD,EAAc,uBAAuB,CAAA,QACrC,CACAL,EAAa,MAAQ,EACvB,CACF"}