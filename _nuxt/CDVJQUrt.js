import{_ as I}from"./0zVE9uvV.js";import{_ as R,a as F,b as T}from"./uVdhCumg.js";import{_ as L}from"./C3Yl993e.js";import{f as h,D as N,i as U,o as c,c as g,b as e,w as t,P as x,n as M,k as i,a as v,t as $,_ as z,r as y,I as O,H as P,ao as B,l as k,d as o,v as q,aC as H,C as W,L as j,an as G,F as D,y as J,m as A,O as K,aD as Q,a7 as X}from"./DStTWlY9.js";import{_ as Y}from"./wK726ach.js";import{_ as Z}from"./Ca8Gaosj.js";import{u as ee}from"./H5oP_V1u.js";import{_ as te}from"./BcRPjhNs.js";import"./CDYnoKLq.js";const ae={class:"px-4"},oe=h({__name:"v-menu-item",props:{to:{},disabled:{type:Boolean}},setup(m){const l=m,s=N(),r=U(()=>l.to==="/"?s.path===l.to:s.path.startsWith(l.to));function d(n){l.disabled&&(n.stopPropagation(),n.preventDefault())}return(n,p)=>{const a=L;return c(),g("div",ae,[e(a,{to:l.to,class:M(["block rounded-md px-3 py-1 text-gray-700 transition-all dark:text-gray-400",{"!cursor-not-allowed opacity-30":l.disabled,"hover:bg-gray-200 hover:dark:bg-gray-800":!l.disabled,"!bg-gray-300 dark:!bg-gray-700":i(r)}]),onClickCapture:d},{default:t(()=>[x(n.$slots,"default")]),_:3},8,["to","class"])])}}}),ne={class:"mb-1.5 px-5 text-lg font-medium"},se={class:"flex flex-col items-stretch gap-1"},le=h({__name:"v-menu-group",props:{title:{}},setup(m){const l=m;return(s,r)=>(c(),g("div",null,[v("div",ne,$(l.title),1),v("div",se,[x(s.$slots,"default")])]))}}),ie={},re={class:"sticky top-3 flex h-fit flex-col items-stretch gap-3 rounded-md bg-gray-100 py-4 transition dark:bg-slate-900"};function ce(m,l){return c(),g("nav",re,[x(m.$slots,"default")])}const _e=z(ie,[["render",ce]]),ue={class:"mb-2.5"},de=["src"],me={class:"grid grid-cols-3 gap-5"},fe=h({__name:"v-modal-sign-agreement",props:{agreement:{}},setup(m,{expose:l}){const s=m,r=y(),d=y(!1);l({show:()=>{var u;return(u=r.value)==null?void 0:u.show()},hide:()=>{var u;return(u=r.value)==null?void 0:u.hide()}});const n=O({id:s.agreement.id,signatory_name:"","2fa_code":""});P(()=>{n.id=s.agreement.id}),P(()=>{d.value||(n.signatory_name="",n["2fa_code"]="")});const p=B(),a=y(!1);async function _(){if(!a.value){a.value=!0;try{await H(n),await p.load(),d.value=!1,n.signatory_name="",n["2fa_code"]="";const{notifySuccess:u}=W();u("Agreement was signed"),ee().emit("agreementSigned",s.agreement)}finally{a.value=!1}}}return(u,f)=>{const w=j,C=L,V=Y,S=Z,E=I;return c(),k(i(te),{ref_key:"modal",ref:r,modelValue:i(d),"onUpdate:modelValue":f[2]||(f[2]=b=>q(d)?d.value=b:null),size:"w-[85rem]"},{header:t(()=>[o($(s.agreement.name),1)]),footer:t(()=>[e(E,{variant:"primary",loading:i(a),onClick:_},{default:t(()=>[o(" Sign ")]),_:1},8,["loading"])]),default:t(()=>[v("p",ue,[e(C,{to:s.agreement.uri,target:"_blank"},{default:t(()=>[e(w,{name:"tabler:external-link",class:"relative -top-[1px]"}),o(" View PDF ")]),_:1},8,["to"])]),v("iframe",{src:s.agreement.uri,class:"mb-5 aspect-[9/16] max-h-[calc(100vh-20rem)] w-full"},null,8,de),v("form",me,[e(S,{label:"Name"},{default:t(()=>[e(V,{modelValue:i(n).signatory_name,"onUpdate:modelValue":f[0]||(f[0]=b=>i(n).signatory_name=b)},null,8,["modelValue"])]),_:1}),e(S,{label:"6 digit code from your authenticator app"},{default:t(()=>[e(V,{modelValue:i(n)["2fa_code"],"onUpdate:modelValue":f[1]||(f[1]=b=>i(n)["2fa_code"]=b)},null,8,["modelValue"])]),_:1}),e(S,{label:"Date"},{default:t(()=>[e(V,{"model-value":new Date().toLocaleDateString(),disabled:""},null,8,["model-value"])]),_:1})])]),_:1},8,["modelValue"])}}}),pe={key:0,class:"mb-5 flex flex-col gap-2"},ge=h({__name:"v-static-notifications",setup(m){const{unsignedAgreements:l}=G(B()),s=y(),r=y(null);async function d(n){var p;r.value=n,await K(),(p=s.value)==null||p.show()}return(n,p)=>{const a=Q;return i(l).length?(c(),g("div",pe,[(c(!0),g(D,null,J(i(l),_=>(c(),k(a,{key:_.id,type:"warning",class:"cursor-pointer",onClick:u=>d(_)},{default:t(()=>[o(" Required agreement "),v("b",null,"«"+$(_.name)+"»",1),o(" isn't signed. ")]),_:2},1032,["onClick"]))),128)),i(r)?(c(),k(i(fe),{key:0,ref_key:"agreementModal",ref:s,agreement:i(r)},null,8,["agreement"])):A("",!0)])):A("",!0)}}}),ve={class:"flex h-full flex-col"},be={class:"flex-grow"},De=h({__name:"default",setup(m){const l=N(),s=X();return(r,d)=>{const n=I,p=R,a=oe,_=le,u=_e,f=ge,w=F,C=T;return c(),g("div",ve,[e(p,null,{default:t(()=>[i(l).name!=="auth"?(c(),g(D,{key:0},[i(s).data?(c(),g(D,{key:0},[v("span",null,$(i(s).data.email),1),e(n,{variant:"primary",onClick:i(s).logout},{default:t(()=>[o(" Logout ")]),_:1},8,["onClick"])],64)):(c(),k(n,{key:1,variant:"primary",to:"/auth"},{default:t(()=>[o(" Login ")]),_:1}))],64)):A("",!0)]),_:1}),e(w,{class:"flex flex-grow gap-8"},{default:t(()=>[e(u,{class:"shrink-0 basis-[18rem]"},{default:t(()=>[e(_,{title:"Apps"},{default:t(()=>[e(a,{to:"/apps/identifiers"},{default:t(()=>[o("Identifiers")]),_:1}),e(a,{to:"/apps/binary-packages"},{default:t(()=>[o("IPA packages")]),_:1})]),_:1}),e(_,{title:"Financial"},{default:t(()=>[e(a,{to:"/finances/invoices",disabled:""},{default:t(()=>[o(" Invoices ")]),_:1}),e(a,{to:"/finances/payouts",disabled:""},{default:t(()=>[o(" Payouts ")]),_:1}),e(a,{to:"/finances/revenue",disabled:""},{default:t(()=>[o(" Revenue ")]),_:1}),e(a,{to:"/finances/products",disabled:""},{default:t(()=>[o(" Products ")]),_:1})]),_:1}),e(_,{title:"Legal"},{default:t(()=>[e(a,{to:"/legal/overview"},{default:t(()=>[o("Overview")]),_:1}),e(a,{to:"/legal/features"},{default:t(()=>[o("Platform features")]),_:1}),e(a,{to:"/legal/copyright-infringements"},{default:t(()=>[o("Copyright infringements")]),_:1}),e(a,{to:"https://publisherid.appdb.to"},{default:t(()=>[o("Publisher ID")]),_:1})]),_:1}),e(_,{title:"Developer area"},{default:t(()=>[e(a,{to:"/developer/tokens"},{default:t(()=>[o("Service keys & tokens")]),_:1}),e(a,{to:"/developer/test-devices"},{default:t(()=>[o("Test devices")]),_:1}),e(a,{to:"https://rtfm.dbservices.to/"},{default:t(()=>[o("Documentation")]),_:1})]),_:1}),e(_,{title:"Settings"},{default:t(()=>[e(a,{to:"/settings/notifications",disabled:""},{default:t(()=>[o(" Email notifications ")]),_:1}),e(a,{to:"/developer/events-notifications",disabled:""},{default:t(()=>[o(" Events notifications ")]),_:1})]),_:1})]),_:1}),v("main",be,[e(f),x(r.$slots,"default")])]),_:3}),e(C)])}}});export{De as default};
//# sourceMappingURL=CDVJQUrt.js.map
