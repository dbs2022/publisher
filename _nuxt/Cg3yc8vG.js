import{_ as q}from"./uRQyHpNr.js";import{_ as G}from"./DBQ85zAG.js";import{_ as H}from"./DIIe9RA5.js";import{_ as J}from"./DENVetjR.js";import{_ as K,a as M,b as Q,c as W}from"./D2tFAWnP.js";import{_ as X}from"./DrAD6xUQ.js";import{_ as Z}from"./CyrYDG1w.js";import{f as ee,r as g,g as N,h as ae,i as te,j as ne,c as B,b as a,w as e,k as i,l as u,n as se,m as d,q as le,s as oe,o as c,d as n,a as V,v as ie,x as ce,F as _e,y as ue,t as p,z as re,A as de,B as pe,C as fe}from"./BnHeC53b.js";import"./B-ep-Aa_.js";const me={class:"flex gap-2"},ve={class:"flex flex-col gap-1.5 whitespace-nowrap"},Ce=ee({__name:"index",async setup(ge){let r,w;const f=g(!1),k=g([]),S=([r,w]=N(()=>le()),r=await r,w(),r),_=g(""),I=S.map(s=>({label:s.label,value:s.identifier}));ae(_,()=>m()),[r,w]=N(()=>m()),await r,w();async function m({silent:s}={}){if(!f.value){s||(f.value=!0);try{k.value=await oe({scope:_.value}),k.value.some(b=>!b.is_finished)&&setTimeout(()=>m({silent:!0}),5e3)}catch{k.value=[]}finally{f.value=!1}}}const{notifySuccess:x,notifyError:D}=fe(),y=g(null);async function L(s){if(!(y.value||!confirm("Are you sure you want to delete this IPA package?"))){y.value=s;try{await re({id:s}),await m(),x("IPA package was deleted")}finally{y.value=null}}}const h=g(null);async function j(s,v){if(!h.value){h.value=s;try{await de({ipa_id:s,to_app_identifier:v}),await m(),x("IPA package was assigned to app")}finally{h.value=null}}}const P=te(()=>{if(_.value)return`/apps/binary-packages/upload/${_.value}`});function z(){P.value||D("Please specify scope to upload IPA package",{id:"upload_ipa"})}return(s,v)=>{const b=q,E=G,A=H,O=J,l=M,C=Q,o=W,R=X,T=Z,$=pe,U=K,F=ne("tooltip");return c(),B("div",null,[a(b,null,{default:e(()=>[n("IPA packages")]),_:1}),i(I).length?(c(),u(O,{key:0,label:"Scope",class:se(["mb-5",{"pointer-events-none":i(f)}])},{default:e(()=>[V("div",me,[a(E,{modelValue:i(_),"onUpdate:modelValue":v[0]||(v[0]=t=>ie(_)?_.value=t:null),placeholder:"Choose identifier",class:"basis-60",options:i(I),"show-clear":""},null,8,["modelValue","options"]),ce(a(A,{variant:"primary",class:"text-xl",to:i(P),icon:"tabler:cloud-upload",onClick:z},null,8,["to"]),[[F,"Upload IPA package"]])])]),_:1},8,["class"])):d("",!0),a(U,{loading:i(f)},{head:e(()=>[a(C,null,{default:e(()=>[a(l,null,{default:e(()=>[n("App identifier")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("App label")]),_:1}),a(l,null,{default:e(()=>[n("Name")]),_:1}),a(l,null,{default:e(()=>[n("Version")]),_:1}),a(l,null,{default:e(()=>[n("Icon")]),_:1}),a(l,null,{default:e(()=>[n("Status")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("Last status validation issue")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("Is assigned")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("Is in store")]),_:1}),a(l)]),_:1})]),empty:e(()=>[n(" No IPA packages were found ")]),body:e(()=>[(c(!0),B(_e,null,ue(i(k),t=>(c(),u(C,{key:t.id},{default:e(()=>[a(o,{class:"break-words"},{default:e(()=>[n(p(t.app_identifier),1)]),_:2},1024),a(o,null,{default:e(()=>[n(p(t.app_label),1)]),_:2},1024),a(o,null,{default:e(()=>[n(p(t.name),1)]),_:2},1024),a(o,null,{default:e(()=>[n(p(t.bundle_version),1)]),_:2},1024),a(o,null,{default:e(()=>[t.icon_uri?(c(),u(R,{key:0,src:t.icon_uri,class:"h-9 w-9 rounded-md object-cover object-center"},null,8,["src"])):d("",!0)]),_:2},1024),a(o,{class:"break-words"},{default:e(()=>[t.is_finished?d("",!0):(c(),u(T,{key:0,size:"1.2em",class:"relative top-1 mr-1.5 inline-block"})),a($,{tag:"span",content:t.status_translated},null,8,["content"])]),_:2},1024),a(o,{class:"whitespace-pre-line break-words"},{default:e(()=>[a($,{content:t.last_status_validation_issue},null,8,["content"])]),_:2},1024),a(o,null,{default:e(()=>[n(p(t.is_assigned?"Yes":"No"),1)]),_:2},1024),a(o,null,{default:e(()=>[n(p(t.is_in_store?"Yes":"No"),1)]),_:2},1024),a(o,null,{default:e(()=>[V("div",ve,[t.is_assigned?d("",!0):(c(),u(A,{key:0,variant:"primary",loading:i(h)===t.id,onClick:Y=>j(t.id,t.app_identifier)},{default:e(()=>[n(" Assign to app ")]),_:2},1032,["loading","onClick"])),t.is_assigned?d("",!0):(c(),u(A,{key:1,to:`/apps/binary-packages/manage/${t.id}`},{default:e(()=>[n(" Edit metadata ")]),_:2},1032,["to"])),t.installations?d("",!0):(c(),u(A,{key:2,variant:"danger",loading:i(y)===t.id,onClick:Y=>L(t.id)},{default:e(()=>[n(" Delete ")]),_:2},1032,["loading","onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])])}}});export{Ce as default};
//# sourceMappingURL=Cg3yc8vG.js.map
