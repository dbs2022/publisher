import{f as B,ak as N,Q as A,i as p,r as C,H as M,c as u,a as _,n as f,k as m,b as v,t as x,P as y,w as j,a0 as E,L as F,o as c,d as g,m as b,C as I}from"./BnHeC53b.js";import{_ as z}from"./CyrYDG1w.js";const L={class:"relative flex flex-col items-center justify-center rounded-md border border-dashed border-gray-200 bg-gray-50 p-4 dark:border-gray-400 dark:bg-gray-600"},P=["multiple","accept"],S={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-center"},T={key:0,class:"absolute inset-0 flex flex-col items-center justify-center gap-2 rounded-md"},D={key:0},U=B({__name:"v-file",props:N({multiple:{type:Boolean},extensions:{},loading:{type:Boolean},progress:{},showFileName:{type:Boolean},notificationId:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const e=s,n=A(s,"modelValue"),h=p(()=>Array.isArray(n.value)?!!n.value.length:!!n.value),k=p(()=>{var t;return h.value?Array.isArray(n.value)?n.value.map(o=>o.name).join(", "):(t=n.value)==null?void 0:t.name:""}),l=C(),d=p(()=>{if(e.extensions)return e.extensions.map(t=>`.${t}`).join(", ")});M(()=>{var t;(t=l.value)==null||t.addEventListener("change",()=>{if(!l.value)return;const o=l.value.files;if(!V(o)){l.value.value="";return}e.multiple?n.value=o?Array.from(o):[]:n.value=o==null?void 0:o[0],l.value.value=""})});function V(t){if(!t||w(t))return!0;const{notifyError:o}=I(),a=e.multiple?"Files":"File",i=e.extensions.length>1?`${a} should have one of the following extensions: ${d.value}`:`${a} should have ${d.value} extension`;return o(i,{duration:e.notificationId?-1:5e3,id:e.notificationId}),!1}function w(t){var a;if(!((a=e.extensions)!=null&&a.length))return!0;const o=r=>{var i;return(i=e.extensions)==null?void 0:i.some($=>r.name.endsWith(`.${$}`))};return Array.from(t).every(o)}return(t,o)=>{const a=F,r=z;return c(),u("div",L,[_("input",{ref_key:"input",ref:l,class:f(["absolute -inset-px block cursor-pointer opacity-0",{"pointer-events-none":e.loading}]),type:"file",multiple:e.multiple,accept:m(d)},null,10,P),v(a,{class:f(["mb-2 text-4xl transition-all",{"opacity-0":e.loading}]),name:"tabler:cloud-upload"},null,8,["class"]),_("div",{class:f(["max-w-full transition-all",{"opacity-0":e.loading}])},[e.showFileName&&m(h)?(c(),u("p",S,x(m(k)),1)):y(t.$slots,"default",{key:1},()=>[g(" Choose a file or drag it here ")])],2),v(E,null,{default:j(()=>[e.loading?(c(),u("div",T,[v(r,{size:"35px",class:"dark:border-blue-950"}),t.$slots.progress||e.progress!==void 0?(c(),u("span",D,[y(t.$slots,"progress",{},()=>[g(x(Math.floor(e.progress||0))+"% ",1)])])):b("",!0)])):b("",!0)]),_:3})])}}});function W(s){return s.total?Math.floor(s.loaded/s.total*100):0}export{U as _,W as c};
//# sourceMappingURL=Czvpe0OB.js.map
