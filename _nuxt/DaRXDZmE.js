import{_ as D}from"./Ge0PHlf4.js";import{_ as E}from"./Bsbk6AGL.js";import{_ as F}from"./VXbtWGCk.js";import{_ as Y,a as q,b as U,c as G}from"./BHTwW-dE.js";import{_ as H}from"./yq-Ri7c7.js";import{_ as J}from"./DUJqKy6i.js";import{f as K,r as g,g as C,h as M,i as Q,o as i,c as N,b as a,w as e,d as n,j as _,k as c,l as W,n as X,m as r,F as Z,q as ee,s as ae,v as te,t as d,a as ne,x as se,y as le,z as oe}from"./KoDMvfaN.js";import{_ as ie}from"./CjxAut2S.js";import"./CpCrrJFV.js";const _e={class:"flex flex-col gap-1.5 whitespace-nowrap"},he=K({__name:"index",async setup(ce){let u,w;const f=g(!1),h=g([]),V=([u,w]=C(()=>ae()),u=await u,w(),u),p=g(""),I=V.map(s=>({label:s.label,value:s.identifier}));M(p,()=>m()),[u,w]=C(()=>m()),await u,w();async function m({silent:s}={}){if(!f.value){s||(f.value=!0);try{h.value=await te({scope:p.value}),h.value.some(b=>!b.is_finished)&&setTimeout(()=>m({silent:!0}),5e3)}catch{h.value=[]}finally{f.value=!1}}}const{notifySuccess:x}=Q(),y=g(null);async function B(s){if(!(y.value||!confirm("Are you sure you want to delete this IPA package?"))){y.value=s;try{await se({id:s}),await m(),x("IPA package was deleted")}finally{y.value=null}}}const k=g(null);async function S(s,v){if(!k.value){k.value=s;try{await le({ipa_id:s,to_app_identifier:v}),await m(),x("IPA package was assigned to app")}finally{k.value=null}}}return(s,v)=>{const b=D,j=E,z=F,l=Y,P=q,o=G,L=H,O=J,$=oe,A=ie,R=U;return i(),N("div",null,[a(b,null,{default:e(()=>[n("IPA packages")]),_:1}),_(I).length?(i(),c(z,{key:0,label:"Scope",class:X(["mb-5 w-60",{"pointer-events-none":_(f)}])},{default:e(()=>[a(j,{modelValue:_(p),"onUpdate:modelValue":v[0]||(v[0]=t=>W(p)?p.value=t:null),placeholder:"Choose identifier",class:"w-full",options:_(I),"show-clear":""},null,8,["modelValue","options"])]),_:1},8,["class"])):r("",!0),a(R,{loading:_(f)},{head:e(()=>[a(P,null,{default:e(()=>[a(l,null,{default:e(()=>[n("App identifier")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("App label")]),_:1}),a(l,null,{default:e(()=>[n("Name")]),_:1}),a(l,null,{default:e(()=>[n("Version")]),_:1}),a(l,null,{default:e(()=>[n("Icon")]),_:1}),a(l,null,{default:e(()=>[n("Status")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("Last status validation issue")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("Is assigned")]),_:1}),a(l,{class:"whitespace-nowrap"},{default:e(()=>[n("Is in store")]),_:1}),a(l)]),_:1})]),empty:e(()=>[n(" No IPA packages were found ")]),body:e(()=>[(i(!0),N(Z,null,ee(_(h),t=>(i(),c(P,{key:t.id},{default:e(()=>[a(o,{class:"break-words"},{default:e(()=>[n(d(t.app_identifier),1)]),_:2},1024),a(o,null,{default:e(()=>[n(d(t.app_label),1)]),_:2},1024),a(o,null,{default:e(()=>[n(d(t.name),1)]),_:2},1024),a(o,null,{default:e(()=>[n(d(t.bundle_version),1)]),_:2},1024),a(o,null,{default:e(()=>[t.icon_uri?(i(),c(L,{key:0,src:t.icon_uri,class:"h-9 w-9 rounded-md object-cover object-center"},null,8,["src"])):r("",!0)]),_:2},1024),a(o,{class:"break-words"},{default:e(()=>[t.is_finished?r("",!0):(i(),c(O,{key:0,size:"1.2em",class:"relative top-1 mr-1.5 inline-block"})),a($,{tag:"span",content:t.status_translated},null,8,["content"])]),_:2},1024),a(o,{class:"whitespace-pre-line break-words"},{default:e(()=>[a($,{content:t.last_status_validation_issue},null,8,["content"])]),_:2},1024),a(o,null,{default:e(()=>[n(d(t.is_assigned?"Yes":"No"),1)]),_:2},1024),a(o,null,{default:e(()=>[n(d(t.is_in_store?"Yes":"No"),1)]),_:2},1024),a(o,null,{default:e(()=>[ne("div",_e,[t.is_assigned?r("",!0):(i(),c(A,{key:0,variant:"primary",loading:_(k)===t.id,onClick:T=>S(t.id,t.app_identifier)},{default:e(()=>[n(" Assign to app ")]),_:2},1032,["loading","onClick"])),t.is_assigned?r("",!0):(i(),c(A,{key:1,to:`/apps/binary-packages/manage/${t.id}`},{default:e(()=>[n(" Edit metadata ")]),_:2},1032,["to"])),t.installations?r("",!0):(i(),c(A,{key:2,variant:"danger",loading:_(y)===t.id,onClick:T=>B(t.id)},{default:e(()=>[n(" Delete ")]),_:2},1032,["loading","onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])])}}});export{he as default};
//# sourceMappingURL=DaRXDZmE.js.map
