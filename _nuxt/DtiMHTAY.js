import{f as B,ai as N,M,i as p,r as j,G as A,o as u,c,a as x,n as f,j as m,b as v,t as _,L as y,d as g,w as C,m as b,Y as E,y as F,x as I}from"./CQGbWGcf.js";import{_ as z}from"./BZpUhvHW.js";const L={class:"relative flex flex-col items-center justify-center rounded-md border border-dashed border-gray-200 bg-gray-50 p-4 dark:border-gray-400 dark:bg-gray-600"},S=["multiple","accept"],T={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-center"},D={key:0,class:"absolute inset-0 flex flex-col items-center justify-center gap-2 rounded-md"},G={key:0},W=B({__name:"v-file",props:N({multiple:{type:Boolean},extensions:{},loading:{type:Boolean},progress:{},showFileName:{type:Boolean},notificationId:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const e=s,n=M(s,"modelValue"),h=p(()=>Array.isArray(n.value)?!!n.value.length:!!n.value),V=p(()=>{var t;return h.value?Array.isArray(n.value)?n.value.map(o=>o.name).join(", "):(t=n.value)==null?void 0:t.name:""}),l=j(),d=p(()=>{if(e.extensions)return e.extensions.map(t=>`.${t}`).join(", ")});A(()=>{var t;(t=l.value)==null||t.addEventListener("change",()=>{if(!l.value)return;const o=l.value.files;if(!k(o)){l.value.value="";return}e.multiple?n.value=o?Array.from(o):[]:n.value=o==null?void 0:o[0],l.value.value=""})});function k(t){if(!t||w(t))return!0;const{notifyError:o}=F(),a=e.multiple?"Files":"File",i=e.extensions.length>1?`${a} should have one of the following extensions: ${d.value}`:`${a} should have ${d.value} extension`;return o(i,{duration:e.notificationId?-1:5e3,id:e.notificationId}),!1}function w(t){var a;if(!((a=e.extensions)!=null&&a.length))return!0;const o=r=>{var i;return(i=e.extensions)==null?void 0:i.some($=>r.name.endsWith(`.${$}`))};return Array.from(t).every(o)}return(t,o)=>{const a=I,r=z;return u(),c("div",L,[x("input",{ref_key:"input",ref:l,class:f(["absolute -inset-px block cursor-pointer opacity-0",{"pointer-events-none":e.loading}]),type:"file",multiple:e.multiple,accept:m(d)},null,10,S),v(a,{class:f(["mb-2 text-4xl transition-all",{"opacity-0":e.loading}]),name:"tabler:cloud-upload"},null,8,["class"]),x("div",{class:f(["max-w-full transition-all",{"opacity-0":e.loading}])},[e.showFileName&&m(h)?(u(),c("p",T,_(m(V)),1)):y(t.$slots,"default",{key:1},()=>[g(" Choose a file or drag it here ")])],2),v(E,null,{default:C(()=>[e.loading?(u(),c("div",D,[v(r,{size:"35px",class:"dark:border-blue-950"}),t.$slots.progress||e.progress!==void 0?(u(),c("span",G,[y(t.$slots,"progress",{},()=>[g(_(Math.floor(e.progress||0))+"% ",1)])])):b("",!0)])):b("",!0)]),_:3})])}}});function Y(s){return s.total?Math.floor(s.loaded/s.total*100):0}export{W as _,Y as c};
//# sourceMappingURL=DtiMHTAY.js.map
