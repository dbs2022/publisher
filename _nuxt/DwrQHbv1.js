import{_ as z}from"./BdmTt6On.js";import{_ as M}from"./TL79erR-.js";import{_ as j}from"./Dg9ZPHzZ.js";import{f as U,aj as q,i as G,o as c,k as $,w as e,j as l,L as O,c as L,_ as H,r as x,H as W,d as a,b as t,a as r,l as J,ak as K,g as T,al as Q,am as X,F,t as o,m as P,q as R,af as Z,ag as ee,an as te,B as ae,ao as le}from"./BKJPD1Af.js";import{a as Y}from"./-oypOTQd.js";import{_ as ne,a as oe,b as se,c as ie}from"./B5Izdgzc.js";import{_ as _e}from"./Cmyw0EnI.js";import{_ as de}from"./CQx_EpTa.js";import{c as ue,_ as re}from"./D8Ta2wSg.js";import{_ as ce}from"./0_PWAuSp.js";import{b as fe}from"./Coi1uFXx.js";import"./CbSbQc9u.js";import"./Ckhsli7N.js";const me={key:1,class:"italic text-zinc-400 dark:text-gray-400"},pe=U({__name:"v-labeled-detail",props:{label:{}},setup(V){const g=V,v=q(),n=G(()=>{var m;const b=(m=v.default)==null?void 0:m.call(v);if(!b)return!1;const f=b.filter(d=>d.patchFlag===1);return f.length?f.some(d=>typeof d.children=="string"?!!d.children.trim():!1):!0});return(b,f)=>{const m=Y;return c(),$(m,{label:g.label},{default:e(()=>[l(n)?O(b.$slots,"default",{key:0}):(c(),L("span",me," Not filled "))]),_:3},8,["label"])}}}),ge={},ve={class:"text-lg font-medium"};function ye(V,g){return c(),L("h3",ve,[O(V.$slots,"default")])}const be=H(ge,[["render",ye]]),he={class:"flex flex-col gap-5"},xe=U({__name:"v-modal-upload-document",props:{legalEntityId:{}},emits:["uploaded"],setup(V,{expose:g,emit:v}){const n=V,b=v,f=x(),m=x(!1);g({show:()=>{var i;return(i=f.value)==null?void 0:i.show()},hide:()=>{var i;return(i=f.value)==null?void 0:i.hide()}});const d=W({legal_entity_id:n.legalEntityId,name:"",pdf:void 0}),N=["Extract from corporate registry","VAT certificate","Articles of association","Power of attorney","Proof of address","Bank statement"].map(i=>({label:i,value:i})),k=x(!1),D=x(0);async function p(){if(!k.value){k.value=!0;try{await K(d,{onUploadProgress:i=>{D.value=ue(i)}}),b("uploaded"),m.value=!1,d.name="",d.pdf=void 0}finally{D.value=0,k.value=!1}}}return(i,y)=>{const A=_e,w=de,S=Y,s=re,E=j;return c(),$(l(ce),{ref_key:"modal",ref:f,modelValue:l(m),"onUpdate:modelValue":y[2]||(y[2]=u=>J(m)?m.value=u:null),size:"w-[40rem]"},{header:e(()=>[a(" Upload supporting document ")]),footer:e(()=>[t(E,{variant:"primary",loading:l(k),onClick:p},{default:e(()=>[a(" Upload ")]),_:1},8,["loading"])]),default:e(()=>[t(A,{class:"mb-2"},{default:e(()=>[a("You can pick any suggested name of the document or enter it manually")]),_:1}),r("form",he,[t(S,{label:"Document name"},{default:e(()=>[t(w,{modelValue:l(d).name,"onUpdate:modelValue":y[0]||(y[0]=u=>l(d).name=u),options:l(N),"show-clear":"",editable:"",class:"w-full"},null,8,["modelValue","options"])]),_:1}),t(s,{modelValue:l(d).pdf,"onUpdate:modelValue":y[1]||(y[1]=u=>l(d).pdf=u),extensions:["pdf"],"show-file-name":"",loading:l(k),progress:l(D),"notification-id":"add_legal_file"},{default:e(()=>[a(" Choose document in PDF format or drag it here ")]),_:1},8,["modelValue","loading","progress"])])]),_:1},8,["modelValue"])}}}),ke={class:"flex items-center gap-4"},we={class:"mt-4 flex flex-col items-stretch gap-5"},$e={class:"flex gap-5"},Le={class:"flex flex-wrap gap-5"},Ve={class:"flex gap-5"},Ne={class:"flex gap-5"},De={class:"flex flex-wrap gap-5"},Ae={key:2},Ee={class:"mb-2 mt-5 flex items-center gap-4"},Se={class:"flex justify-end gap-1.5"},Be={class:"flex justify-end gap-1.5"},Ge=U({__name:"overview",async setup(V){let g,v;const n=([g,v]=T(()=>Z().catch(p=>{if(p instanceof ee&&p.hasCode("ERROR_LEGAL_ENTITY_NOT_DEFINED"))return null;throw p})),g=await g,v(),g),b=x(),f=x([]),m=x(!1);[g,v]=T(()=>d()),await g,v();async function d(){if(!n)return[];m.value=!0;try{const p=await te({legal_entity_id:n.id});f.value=p}catch{f.value=[]}finally{m.value=!1}}const N=x();async function k(p){if(!(N.value||!confirm("Are you sure you want to delete this document?"))){N.value=p;try{await le({id:p});const i=f.value.findIndex(y=>y.id===p);f.value.splice(i,1)}finally{N.value=null}}}const{allAgreements:D}=Q(X());return(p,i)=>{const y=z,A=M,w=j,S=ae,s=pe,E=be,u=ne,B=oe,h=ie,I=se;return c(),L("div",null,[t(y,null,{default:e(()=>[a("Legal overview")]),_:1}),l(n)?(c(),L(F,{key:0},[r("div",ke,[t(A,null,{default:e(()=>[a(o(l(n).name),1)]),_:1}),t(w,{variant:"primary",to:"/legal/info/manage"},{default:e(()=>[a(" Edit information ")]),_:1})]),r("div",we,[r("div",$e,[t(s,{label:"Status"},{default:e(()=>[t(S,{content:l(n).status_translated},null,8,["content"])]),_:1}),l(n).last_status_validation_issue?(c(),$(s,{key:0,label:"Last status validation issue"},{default:e(()=>[t(S,{class:"whitespace-pre-line",content:l(n).last_status_validation_issue},null,8,["content"])]),_:1})):P("",!0)]),r("div",Le,[t(s,{label:"Legal type"},{default:e(()=>[a(o(l(n).type),1)]),_:1}),t(s,{label:"Legal name"},{default:e(()=>[a(o(l(n).name),1)]),_:1}),t(s,{label:"Legal address"},{default:e(()=>[a(o(l(n).address),1)]),_:1}),t(s,{label:"Country"},{default:e(()=>[a(o(l(n).country),1)]),_:1}),t(s,{label:"VAT number"},{default:e(()=>[a(o(l(n).vat_number),1)]),_:1}),t(s,{label:"Registry code"},{default:e(()=>[a(o(l(n).registry_code),1)]),_:1})]),r("div",null,[t(E,{class:"mb-2"},{default:e(()=>[a("Representative")]),_:1}),r("div",Ve,[t(s,{label:"Name"},{default:e(()=>[a(o(l(n).representative_name),1)]),_:1}),t(s,{label:"Email"},{default:e(()=>[a(o(l(n).representative_email),1)]),_:1}),t(s,{label:"Phone"},{default:e(()=>[a(o(l(n).representative_number),1)]),_:1}),t(s,{label:"Position"},{default:e(()=>[a(o(l(n).representative_position),1)]),_:1})])]),r("div",null,[t(E,{class:"mb-2"},{default:e(()=>[a("Signatory")]),_:1}),r("div",Ne,[t(s,{label:"Name"},{default:e(()=>[a(o(l(n).signatory_name),1)]),_:1}),t(s,{label:"Email"},{default:e(()=>[a(o(l(n).signatory_email),1)]),_:1}),t(s,{label:"Phone"},{default:e(()=>[a(o(l(n).signatory_number),1)]),_:1}),t(s,{label:"Position"},{default:e(()=>[a(o(l(n).signatory_position),1)]),_:1})])]),r("div",null,[t(E,{class:"mb-2"},{default:e(()=>[a("Bank account details")]),_:1}),r("div",De,[t(s,{label:"Bank name"},{default:e(()=>[a(o(l(n).bank_name),1)]),_:1}),t(s,{label:"Address"},{default:e(()=>[a(o(l(n).bank_address),1)]),_:1}),t(s,{label:"BIC/SWIFT"},{default:e(()=>[a(o(l(n).bank_swift),1)]),_:1}),t(s,{label:"Account number / IBAN"},{default:e(()=>[a(o(l(n).bank_iban),1)]),_:1})])])])],64)):(c(),$(w,{key:1,variant:"primary",to:"/legal/info/manage"},{default:e(()=>[a(" Add information ")]),_:1})),l(n)?(c(),L("div",Ae,[r("div",Ee,[t(l(xe),{ref_key:"uploadDocumentModal",ref:b,"legal-entity-id":l(n).id,onUploaded:d},null,8,["legal-entity-id"]),t(A,null,{default:e(()=>[a("Supporting documents")]),_:1}),t(w,{variant:"primary",onClick:i[0]||(i[0]=_=>{var C;return(C=l(b))==null?void 0:C.show()})},{default:e(()=>[a(" Upload ")]),_:1})]),t(I,{loading:l(m)},{head:e(()=>[t(B,null,{default:e(()=>[t(u,null,{default:e(()=>[a("Name")]),_:1}),t(u,null,{default:e(()=>[a("Status")]),_:1}),t(u,null,{default:e(()=>[a("Last status validation issue")]),_:1}),t(u)]),_:1})]),empty:e(()=>[a(" No documents found ")]),body:e(()=>[(c(!0),L(F,null,R(l(f),_=>(c(),$(B,{key:_.id},{default:e(()=>[t(h,null,{default:e(()=>[a(o(_.name),1)]),_:2},1024),t(h,null,{default:e(()=>[a(o(_.status_translated),1)]),_:2},1024),t(h,null,{default:e(()=>[a(o(_.last_status_validation_issue),1)]),_:2},1024),t(h,null,{default:e(()=>[r("div",Se,[_.status!==l(fe).Ok?(c(),$(w,{key:0,loading:l(N)===_.id,variant:"danger",onClick:C=>k(_.id)},{default:e(()=>[a(" Delete ")]),_:2},1032,["loading","onClick"])):P("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])])):P("",!0),t(A,{class:"mb-2 mt-5"},{default:e(()=>[a("Agreements")]),_:1}),t(I,null,{head:e(()=>[t(B,null,{default:e(()=>[t(u,null,{default:e(()=>[a("Document title")]),_:1}),t(u,null,{default:e(()=>[a("Signed")]),_:1}),t(u,null,{default:e(()=>[a("Signatory")]),_:1}),t(u,null,{default:e(()=>[a("Signing date")]),_:1}),t(u)]),_:1})]),empty:e(()=>[a(" No agreements found ")]),body:e(()=>[(c(!0),L(F,null,R(l(D),_=>(c(),$(B,{key:_.id},{default:e(()=>[t(h,null,{default:e(()=>[a(o(_.name),1)]),_:2},1024),t(h,null,{default:e(()=>[a(o(_.signed_at?"Yes":"No"),1)]),_:2},1024),t(h,null,{default:e(()=>[a(o(_.signatory_name),1)]),_:2},1024),t(h,null,{default:e(()=>[a(o(_.signed_at?new Date(_.signed_at*1e3).toLocaleString():""),1)]),_:2},1024),t(h,null,{default:e(()=>[r("div",Be,[t(w,{to:_.uri,target:"_blank"},{default:e(()=>[a(" View / Download ")]),_:2},1032,["to"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})])}}});export{Ge as default};
//# sourceMappingURL=DwrQHbv1.js.map
