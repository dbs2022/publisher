import{_ as Y}from"./DJuVdf4Q.js";import{_ as z}from"./CI-CWKYf.js";import{_ as R}from"./C147fr_D.js";import{_ as G,o as c,c as V,K as M,f as j,r as b,G as q,k as L,w as e,d as t,b as a,j as l,a as u,l as K,aj as W,g as I,ak as H,al as J,F as B,t as o,m as U,q as T,af as Q,ag as X,am as Z,z as ee,an as ae}from"./CoSVzNQ_.js";import{_ as O}from"./XerbHTTD.js";import{_ as te,a as le,b as ne,c as oe}from"./Dy5dflx3.js";import{_ as se}from"./BTTZK2XO.js";import{_ as _e}from"./Crzu2Q1t.js";import{c as ie,_ as de}from"./BM8o4gWn.js";import{_ as ue}from"./WUd55Ljh.js";import{b as re}from"./Coi1uFXx.js";import"./CWRi_1Rx.js";import"./DhVMCfed.js";const ce={},fe={class:"text-lg font-medium"};function me(E,p){return c(),V("h3",fe,[M(E.$slots,"default")])}const pe=G(ce,[["render",me]]),ge={class:"flex flex-col gap-5"},ve=j({__name:"v-modal-upload-document",props:{legalEntityId:{}},emits:["uploaded"],setup(E,{expose:p,emit:k}){const n=E,N=k,g=b(),y=b(!1);p({show:()=>{var _;return(_=g.value)==null?void 0:_.show()},hide:()=>{var _;return(_=g.value)==null?void 0:_.hide()}});const f=q({legal_entity_id:n.legalEntityId,name:"",pdf:void 0}),w=["Extract from corporate registry","VAT certificate","Articles of association","Power of attorney","Proof of address","Bank statement"].map(_=>({label:_,value:_})),h=b(!1),$=b(0);async function r(){if(!h.value){h.value=!0;try{await W(f,{onUploadProgress:_=>{$.value=ie(_)}}),N("uploaded"),y.value=!1,f.name="",f.pdf=void 0}finally{$.value=0,h.value=!1}}}return(_,m)=>{const D=se,x=_e,S=O,s=de,A=R;return c(),L(l(ue),{ref_key:"modal",ref:g,modelValue:l(y),"onUpdate:modelValue":m[2]||(m[2]=d=>K(y)?y.value=d:null),size:"w-[40rem]"},{header:e(()=>[t(" Upload supporting document ")]),footer:e(()=>[a(A,{variant:"primary",loading:l(h),onClick:r},{default:e(()=>[t(" Upload ")]),_:1},8,["loading"])]),default:e(()=>[a(D,{class:"mb-2"},{default:e(()=>[t("You can pick any suggested name of the document or enter it manually")]),_:1}),u("form",ge,[a(S,{label:"Document name"},{default:e(()=>[a(x,{modelValue:l(f).name,"onUpdate:modelValue":m[0]||(m[0]=d=>l(f).name=d),options:l(w),"show-clear":"",editable:"",class:"w-full"},null,8,["modelValue","options"])]),_:1}),a(s,{modelValue:l(f).pdf,"onUpdate:modelValue":m[1]||(m[1]=d=>l(f).pdf=d),accept:".pdf","show-file-name":"",loading:l(h),progress:l($)},{default:e(()=>[t(" Choose document in PDF format or drag it here ")]),_:1},8,["modelValue","loading","progress"])])]),_:1},8,["modelValue"])}}}),ye={class:"flex items-center gap-4"},be={class:"mt-4 flex flex-col items-stretch gap-5"},he={class:"flex gap-5"},xe={class:"flex flex-wrap gap-5"},ke={class:"flex gap-5"},we={class:"flex gap-5"},Ve={class:"flex flex-wrap gap-5"},Le={key:2},$e={class:"mb-2 mt-5 flex items-center gap-4"},De={class:"flex justify-end gap-1.5"},Ae={class:"flex justify-end gap-1.5"},Ye=j({__name:"overview",async setup(E){let p,k;const n=([p,k]=I(()=>Q().catch(r=>{if(r instanceof X&&r.hasCode("ERROR_LEGAL_ENTITY_NOT_DEFINED"))return null;throw r})),p=await p,k(),p),N=b(),g=b([]),y=b(!1);[p,k]=I(()=>f()),await p,k();async function f(){if(!n)return[];y.value=!0;try{const r=await Z({legal_entity_id:n.id});g.value=r}catch{g.value=[]}finally{y.value=!1}}const w=b();async function h(r){if(!(w.value||!confirm("Are you sure you want to delete this document?"))){w.value=r;try{await ae({id:r});const _=g.value.findIndex(m=>m.id===r);g.value.splice(_,1)}finally{w.value=null}}}const{allAgreements:$}=H(J());return(r,_)=>{const m=Y,D=z,x=R,S=ee,s=O,A=pe,d=te,C=le,v=oe,F=ne;return c(),V("div",null,[a(m,null,{default:e(()=>[t("Legal overview")]),_:1}),l(n)?(c(),V(B,{key:0},[u("div",ye,[a(D,null,{default:e(()=>[t(o(l(n).name),1)]),_:1}),a(x,{variant:"primary",to:"/legal/info/manage"},{default:e(()=>[t(" Edit information ")]),_:1})]),u("div",be,[u("div",he,[a(s,{label:"Status"},{default:e(()=>[a(S,{content:l(n).status_translated},null,8,["content"])]),_:1}),l(n).last_status_validation_issue?(c(),L(s,{key:0,label:"Last status validation issue"},{default:e(()=>[a(S,{class:"whitespace-pre-line",content:l(n).last_status_validation_issue},null,8,["content"])]),_:1})):U("",!0)]),u("div",xe,[a(s,{label:"Legal type"},{default:e(()=>[t(o(l(n).type),1)]),_:1}),a(s,{label:"Legal name"},{default:e(()=>[t(o(l(n).name),1)]),_:1}),a(s,{label:"Legal address"},{default:e(()=>[t(o(l(n).address),1)]),_:1}),a(s,{label:"Country"},{default:e(()=>[t(o(l(n).country),1)]),_:1}),a(s,{label:"VAT number"},{default:e(()=>[t(o(l(n).vat_number),1)]),_:1}),a(s,{label:"Registry code"},{default:e(()=>[t(o(l(n).registry_code),1)]),_:1})]),u("div",null,[a(A,{class:"mb-2"},{default:e(()=>[t("Representative")]),_:1}),u("div",ke,[a(s,{label:"Name"},{default:e(()=>[t(o(l(n).representative_name),1)]),_:1}),a(s,{label:"Email"},{default:e(()=>[t(o(l(n).representative_email),1)]),_:1}),a(s,{label:"Phone"},{default:e(()=>[t(o(l(n).representative_number),1)]),_:1}),a(s,{label:"Position"},{default:e(()=>[t(o(l(n).representative_position),1)]),_:1})])]),u("div",null,[a(A,{class:"mb-2"},{default:e(()=>[t("Signatory")]),_:1}),u("div",we,[a(s,{label:"Name"},{default:e(()=>[t(o(l(n).signatory_name),1)]),_:1}),a(s,{label:"Email"},{default:e(()=>[t(o(l(n).signatory_email),1)]),_:1}),a(s,{label:"Phone"},{default:e(()=>[t(o(l(n).signatory_number),1)]),_:1}),a(s,{label:"Position"},{default:e(()=>[t(o(l(n).signatory_position),1)]),_:1})])]),u("div",null,[a(A,{class:"mb-2"},{default:e(()=>[t("Bank account details")]),_:1}),u("div",Ve,[a(s,{label:"Bank name"},{default:e(()=>[t(o(l(n).bank_name),1)]),_:1}),a(s,{label:"Address"},{default:e(()=>[t(o(l(n).bank_address),1)]),_:1}),a(s,{label:"BIC/SWIFT"},{default:e(()=>[t(o(l(n).bank_swift),1)]),_:1}),a(s,{label:"Account number / IBAN"},{default:e(()=>[t(o(l(n).bank_iban),1)]),_:1})])])])],64)):(c(),L(x,{key:1,variant:"primary",to:"/legal/info/manage"},{default:e(()=>[t(" Add information ")]),_:1})),l(n)?(c(),V("div",Le,[u("div",$e,[a(l(ve),{ref_key:"uploadDocumentModal",ref:N,"legal-entity-id":l(n).id,onUploaded:f},null,8,["legal-entity-id"]),a(D,null,{default:e(()=>[t("Supporting documents")]),_:1}),a(x,{variant:"primary",onClick:_[0]||(_[0]=i=>{var P;return(P=l(N))==null?void 0:P.show()})},{default:e(()=>[t(" Upload ")]),_:1})]),a(F,{loading:l(y)},{head:e(()=>[a(C,null,{default:e(()=>[a(d,null,{default:e(()=>[t("Name")]),_:1}),a(d,null,{default:e(()=>[t("Status")]),_:1}),a(d,null,{default:e(()=>[t("Last status validation issue")]),_:1}),a(d)]),_:1})]),empty:e(()=>[t(" No documents found ")]),body:e(()=>[(c(!0),V(B,null,T(l(g),i=>(c(),L(C,{key:i.id},{default:e(()=>[a(v,null,{default:e(()=>[t(o(i.name),1)]),_:2},1024),a(v,null,{default:e(()=>[t(o(i.status_translated),1)]),_:2},1024),a(v,null,{default:e(()=>[t(o(i.last_status_validation_issue),1)]),_:2},1024),a(v,null,{default:e(()=>[u("div",De,[i.status!==l(re).Ok?(c(),L(x,{key:0,loading:l(w)===i.id,variant:"danger",onClick:P=>h(i.id)},{default:e(()=>[t(" Delete ")]),_:2},1032,["loading","onClick"])):U("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])])):U("",!0),a(D,{class:"mb-2 mt-5"},{default:e(()=>[t("Agreements")]),_:1}),a(F,null,{head:e(()=>[a(C,null,{default:e(()=>[a(d,null,{default:e(()=>[t("Document title")]),_:1}),a(d,null,{default:e(()=>[t("Signed")]),_:1}),a(d,null,{default:e(()=>[t("Signatory")]),_:1}),a(d,null,{default:e(()=>[t("Signing date")]),_:1}),a(d)]),_:1})]),empty:e(()=>[t(" No agreements found ")]),body:e(()=>[(c(!0),V(B,null,T(l($),i=>(c(),L(C,{key:i.id},{default:e(()=>[a(v,null,{default:e(()=>[t(o(i.name),1)]),_:2},1024),a(v,null,{default:e(()=>[t(o(i.signed_at?"Yes":"No"),1)]),_:2},1024),a(v,null,{default:e(()=>[t(o(i.signatory_name),1)]),_:2},1024),a(v,null,{default:e(()=>[t(o(i.signed_at?new Date(i.signed_at*1e3).toLocaleString():""),1)]),_:2},1024),a(v,null,{default:e(()=>[u("div",Ae,[a(x,{to:i.uri,target:"_blank"},{default:e(()=>[t(" View / Download ")]),_:2},1032,["to"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})])}}});export{Ye as default};
//# sourceMappingURL=WCVoDtbk.js.map
