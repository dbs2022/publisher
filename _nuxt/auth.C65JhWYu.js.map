{"version":3,"file":"auth.C65JhWYu.js","sources":["../../../../pages/auth.vue"],"sourcesContent":["<template>\n  <div class=\"flex min-h-full items-center justify-center\">\n    <div class=\"flex flex-col gap-2\">\n      <v-button\n        tag=\"a\"\n        :href=\"config.public.loginUrl\"\n        variant=\"primary\"\n        :loading=\"isLoggingIn\"\n      >\n        Login\n      </v-button>\n      <v-button\n        tag=\"a\"\n        :href=\"config.public.registerUrl\"\n      >\n        Create publisher account\n      </v-button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  layout: false,\n  requiredRole: \"guest\",\n})\n\nconst config = useRuntimeConfig()\n\nconst route = useRoute()\nconst isLoggingIn = ref(false)\n\nonBeforeMount(async () => {\n  if (typeof route.query.st === \"string\") {\n    isLoggingIn.value = true\n\n    try {\n      const userStore = useUserStore()\n      await userStore.login(route.query.st as string)\n\n      const router = useRouter()\n      router.push(\"/\")\n    } finally {\n      isLoggingIn.value = false\n    }\n  }\n})\n</script>\n"],"names":["config","useRuntimeConfig","route","useRoute","isLoggingIn","ref","onBeforeMount","useUserStore","useRouter"],"mappings":"uVA2BA,MAAMA,EAASC,IAETC,EAAQC,IACRC,EAAcC,EAAI,EAAK,EAE7B,OAAAC,EAAc,SAAY,CACxB,GAAI,OAAOJ,EAAM,MAAM,IAAO,SAAU,CACtCE,EAAY,MAAQ,GAEhB,GAAA,CAEF,MADkBG,IACF,MAAML,EAAM,MAAM,EAAY,EAE/BM,IACR,KAAK,GAAG,CAAA,QACf,CACAJ,EAAY,MAAQ,EACtB,CACF,CAAA,CACD"}